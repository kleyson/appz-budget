# Appz Budget - Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# Core Configuration
# =============================================================================

# API Key for authentication (required)
# Generate a secure random string for production
API_KEY=your-secret-api-key-change-this

# Database URL (default: SQLite in ./data/budget.db)
DATABASE_URL=sqlite:///./data/budget.db

# Frontend URL (used for password reset links)
# Update this to your actual domain in production
FRONTEND_URL=http://localhost:8000

# =============================================================================
# SMTP Email Configuration (Optional)
# =============================================================================
# If SMTP is not configured, password reset codes will only appear in logs.
# Admins can view codes via: docker logs -f appz-budget

# SMTP Host (e.g., smtp.gmail.com, smtp.sendgrid.net)
# Leave empty to disable email sending
SMTP_HOST=

# SMTP Port (default: 587 for TLS, 465 for SSL, 25 for unencrypted)
SMTP_PORT=587

# SMTP Username (often your email address)
SMTP_USER=

# SMTP Password or App Password
# For Gmail: Use an App Password from https://myaccount.google.com/apppasswords
# For SendGrid: Use your API key
SMTP_PASSWORD=

# From email address (sender)
SMTP_FROM=

# Use TLS for secure connection (default: true)
# Set to false only if your SMTP server doesn't support TLS
SMTP_USE_TLS=true

# =============================================================================
# SMTP Provider Examples
# =============================================================================

# --- Gmail ---
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-16-char-app-password
# SMTP_FROM=your-email@gmail.com
# SMTP_USE_TLS=true
# Note: Enable "2-Step Verification" and create an App Password at:
# https://myaccount.google.com/apppasswords

# --- SendGrid ---
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=your-sendgrid-api-key
# SMTP_FROM=noreply@yourdomain.com
# SMTP_USE_TLS=true
# Note: Get your API key from https://app.sendgrid.com/settings/api_keys

# --- Mailgun ---
# SMTP_HOST=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_USER=postmaster@yourdomain.mailgun.org
# SMTP_PASSWORD=your-mailgun-smtp-password
# SMTP_FROM=noreply@yourdomain.com
# SMTP_USE_TLS=true
# Note: Find your SMTP credentials at https://app.mailgun.com/app/sending/domains

# --- AWS SES ---
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-username
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=verified-email@yourdomain.com
# SMTP_USE_TLS=true
# Note: Must verify your sending domain/email in AWS SES console

# =============================================================================
# Password Reset Configuration
# =============================================================================

# Length of the short reset code (default: 6)
# Recommended: 6-8 digits for easy typing
RESET_CODE_LENGTH=6

# Short code expiration time in minutes (default: 30)
# How long the 6-digit code remains valid
RESET_CODE_EXPIRATION_MINUTES=30

# Long token expiration time in hours (default: 24)
# How long the full reset URL token remains valid
RESET_TOKEN_EXPIRATION_HOURS=24

# =============================================================================
# Usage Guide
# =============================================================================

# Log-Only Mode (No Email):
# - Don't set SMTP_HOST (leave empty or omit)
# - Reset codes appear in: docker logs -f appz-budget
# - Look for formatted box with PASSWORD RESET REQUEST

# Email Mode:
# - Set all SMTP_* variables above
# - Codes sent via email AND logged to Docker logs
# - Users receive HTML email with code and reset link

# Admin Panel:
# - Admin users see Settings > Password Resets tab
# - View all active reset requests
# - Generate reset links for users
# - Copy codes to clipboard

# =============================================================================
# Security Notes
# =============================================================================

# 1. Never commit .env file to version control
# 2. Use strong, unique API_KEY in production
# 3. Use App Passwords for Gmail (not your main password)
# 4. Restrict SMTP credentials to sending only
# 5. Use environment-specific SMTP credentials
# 6. Monitor Docker logs for suspicious password reset requests
